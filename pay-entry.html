<div class="container">
  <h1>Paid Entry</h1>

  <div id="closedBox" class="closed-box">
    <h2>Entries are closed</h2>
    <p>This competition is sold out.</p>
    <p>A new competition is coming soon</p>
  </div>

  <form id="entryForm">
    <input type="text" name="name" placeholder="Name" required>
    <input type="text" name="phone" placeholder="Phone" required>
    <button type="submit" id="payNow">Pay Now</button>
  </form>
</div>

<style>
.closed-box {
  display: none;
  text-align: center;
  padding: 40px;
  margin-top: 40px;
  background: #f7f7f7;
  border-radius: 10px;
}

.closed-box h2 {
  font-size: 28px;
  margin-bottom: 10px;
}

.closed-box p {
  font-size: 18px;
  color: #444;
}
</style>

<script>
const form = document.getElementById('entryForm');
const closedBox = document.getElementById('closedBox');
const SCRIPT_URL = "PASTE_YOUR_SCRIPT_URL_HERE"; // pune URL-ul Apps Script aici

form.addEventListener('submit', e => {
  e.preventDefault();
  fetch(SCRIPT_URL, { method: "POST", body: new FormData(form) })
    .then(response => response.json())
    .then(data => {
        if (data.status === "closed") {
            form.style.display = "none"; // ascunde formularul
            closedBox.style.display = "block"; // afișează mesajul de competiție închisă
        } else {
            alert("Entry received successfully! We will contact you if you win.");
            form.reset();
        }
    })
    .catch(err => {
        console.error(err);
        alert("Error connecting to server. Please try again.");
    });
});
</script>
