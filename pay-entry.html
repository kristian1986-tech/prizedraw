<div class="container">
  <h1>Paid Entry</h1>

  <!-- Box care apare cÃ¢nd competiÈ›ia e Ã®nchisÄƒ -->
  <div id="closedBox" class="closed-box">
    <h2>Entries are closed</h2>
    <p>This competition is sold out.</p>
    <p>A new competition is coming soon</p>
  </div>

  <!-- Formular -->
  <form id="paidForm">
    <input type="text" name="name" placeholder="Name" required>
    <input type="text" name="phone" placeholder="Phone" required>
    <button type="submit" id="payBtn" class="button">Pay Now</button>
  </form>

  <!-- Mesaj de confirmare -->
  <p id="successMsg" class="success-msg"></p>
</div>

<style>
.container {
  max-width: 500px;
  margin: 50px auto;
  padding: 30px;
  background: #fff;
  border-radius: 10px;
  text-align: center;
  box-shadow: 0 0 10px rgba(0,0,0,0.1);
}

input[type="text"] {
  width: 80%;
  padding: 12px;
  margin: 10px 0;
  border-radius: 5px;
  border: 1px solid #ccc;
  font-size: 16px;
}

.button {
  display: inline-block;
  padding: 12px 25px;
  margin-top: 10px;
  background: #0070f3;
  color: #fff;
  border-radius: 5px;
  font-weight: bold;
  font-size: 16px;
  cursor: pointer;
  transition: background 0.3s;
}

.button:hover {
  background: #005bb5;
}

.closed-box {
  display: none;
  text-align: center;
  padding: 40px;
  margin-top: 20px;
  background: #f7f7f7;
  border-radius: 10px;
}

.closed-box h2 {
  font-size: 28px;
  margin-bottom: 10px;
}

.closed-box p {
  font-size: 18px;
  color: #444;
}

.success-msg {
  color: green;
  font-weight: bold;
  margin-top: 20px;
}
</style>

<script>
const form = document.getElementById("paidForm");
const successMsg = document.getElementById("successMsg");
const closedBox = document.getElementById("closedBox");
const payBtn = document.getElementById("payBtn");

const scriptURL = "https://script.google.com/macros/s/AKfycbzEPduvG90nxEGBkTQAfit-ssWT01NgBaARnWumgaFHRubHzjU79wo_-kyGIZFrDkW9/exec";

/* ðŸ” VERIFICARE STATUS LA ÃŽNCÄ‚RCARE PAGINÄ‚ */
window.addEventListener("DOMContentLoaded", () => {
  fetch(scriptURL)
    .then(res => res.json())
    .then(data => {
      if (data.status === "closed") {
        form.style.display = "none";
        successMsg.style.display = "none";
        closedBox.style.display = "block";
      }
    })
    .catch(err => console.error("Status check error", err));
});

/* ðŸ“¨ TRIMITERE FORMULAR */
form.addEventListener("submit", e => {
  e.preventDefault();

  fetch(scriptURL, { method: "POST", body: new FormData(form) })
    .then(response => response.json())
    .then(data => {

      // ðŸ”’ COMPETIÈšIE ÃŽNCHISÄ‚
      if (data.status === "closed") {
        successMsg.style.display = "none";
        form.style.display = "none";
        closedBox.style.display = "block";
        return;
      }

      // âœ… ÃŽNSCRIERE OK
      if (data.status === "ok") {
        successMsg.textContent = "Entry received successfully! We will contact you if you win.";
        successMsg.style.display = "block";
        form.reset();
      }

    })
    .catch(error => console.error("Error!", error.message));
});
</script>
